<mat-toolbar color="secondary" class="mat-elevation-z6">
    <mat-toolbar-row>
      <a [routerLink]="'/administration'">Administration</a>
      <span class="breadcrumb"><a [routerLink]="'/administration/iteration'">Iterations</a></span>
      <div *ngIf="iteration?.id == null; then thenAriane else editAriane"></div>
      <ng-template #thenAriane>
        <span class="breadcrumb">Create iteration</span>
      </ng-template>
      <ng-template #editAriane>
        <span class="breadcrumb">Edit iteration {{iteration.number}}</span>
      </ng-template>
    </mat-toolbar-row>
  </mat-toolbar>

<div class="horizontal-centred-content">
  <mat-card class="screen" *ngIf="iteration">
    <mat-card-header>
      <h1 *ngIf="iteration?.id == null; else editHeader">Create iteration</h1>
      <ng-template #editHeader>
          <h1 >Edit iteration</h1>
      </ng-template>
    </mat-card-header>
    <mat-card-content>
      <div class="form-field-container" >
          <mat-form-field>
              <input matInput type="number" min="0" placeholder="Number" [(ngModel)]="iteration.number">
          </mat-form-field>
          <mat-form-field>
            <input matInput type="number" min="0" placeholder="Planned development cost" [(ngModel)]="iteration.plannedDevelopmentCost">
        </mat-form-field>
        <mat-form-field>
            <input matInput placeholder="Name" [(ngModel)]="iteration.name">
        </mat-form-field>
        <mat-form-field>
          <input matInput [matDatepicker]="startPicker" [(ngModel)]="iteration.start" [max]="iteration.end" placeholder="Start date">
          <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
          <mat-datepicker #startPicker></mat-datepicker>
        </mat-form-field>
        <mat-form-field>
          <input matInput [matDatepicker]="endPicker" [(ngModel)]="iteration.end" [min]="iteration.start" placeholder="End date">
          <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
          <mat-datepicker #endPicker></mat-datepicker>
        </mat-form-field>
      </div>
    </mat-card-content>
    <mat-card-actions>
      <button mat-raised-button (click)="save()">Save</button>
      <button mat-raised-button (click)="cancel()">Cancel</button>
    </mat-card-actions>
  </mat-card>

  <app-iterations-objectives-view class="screen" [iteration]="iteration" ></app-iterations-objectives-view>
</div>
